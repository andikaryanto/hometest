import{a as e,r as d,j as r,R as m,p as S,c as R,t as $}from"./app-230bb32c.js";import{p as X,A as Y}from"./Patient-bc23875f.js";import{B as L,g as Z,a as A,f as z,h as ee,b as te}from"./Request-e7f6bbaa.js";import{b as ae,c as se,d as ne,e as le,f as re,g as ie}from"./Toast-203e162b.js";import{u as P,a as M}from"./app-db60d94e.js";import{T as H}from"./TextInput-d74dba03.js";import{P as I}from"./PrimaryButton-1eb951bc.js";import oe from"./NoData-89e9a8ed.js";import"./Clinic-1b8e14ea.js";import{T as D}from"./Toast-3fee0a06.js";import{a as ce,t as de,b as me,c as ue}from"./TableReservation-463d8a51.js";import"./ClearButton-33594f12.js";import"./Table-d31decab.js";const he=({children:t,className:s,...n})=>e(L,{...n,className:s+" rounded-full px-4 py-2 mr-2 mb-2",children:t});function B({className:t,...s}){return e("div",{className:`px-2 rounded-lg h-4 ${t}`,children:s.children})}const pe=({children:t,className:s,...n})=>e(he,{...n,className:s+"",children:t}),ge=({children:t,className:s,...n})=>e(pe,{...n,className:s+" h-8 items-center text-xs",children:t}),fe=({page:t,size:s,totalData:n,onPageChanged:u,showResultPage:h,...b})=>{P();const[w,i]=d.useState("w-10"),[o,v]=d.useState({page:1,totalPage:1}),x=o.page==1,N=o.page==o.totalPage;n<s&&(s=n);const c=()=>Math.ceil(n/s),p=l=>{v({...o,page:l,totalPage:c()}),l.length<1&&i("w-10"),l.length==2&&i("w-12"),l.length==3&&i("w-14"),l.length==4&&i("w-16"),u(l)},g=()=>{p(o.page+1)},k=()=>{p(o.page-1)};return d.useEffect(()=>{v({page:t,size:s})},[t,s,n]),e("div",{className:"px-6 mt-4 flex items-center justify-between py-4",children:r("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[h?e("div",{children:r("p",{className:"text-sm ",children:["Tampilkan ",e("span",{className:"font-medium",children:"1"})," s/d"," ",e("span",{className:"font-medium",children:s})," dari"," ",e("span",{className:"font-medium",children:n})," hasil"]})}):null,r("div",{className:"inline-flex items-center",children:[r("p",{className:"text-sm ",children:["Total Halaman: ",c()]}),r("div",{className:"inline-flex -space-x-px","aria-label":"Pagination",children:[e(L,{onClick:k,disabled:x,className:"ml-3 px-3 py-2 text-sm rounded-lg",children:e(ae,{})}),e("div",{children:e(H,{value:o.page,className:`text-center h-8 ${w}`,onChange:l=>p(l.target.value)})}),e(L,{disabled:N,className:"ml-3 px-3 py-2 text-sm rounded-lg",onClick:g,children:e(se,{})})]})]})]})})},be=({children:t,...s})=>(P(),e("th",{className:"text-green-500 uppercase font-medium pl-8 py-[1px] text-left ",children:t})),V=({className:t,children:s,addSpace:n=!1,highLight:u=!1,...h})=>{const{theme:b}=P(),{hoverTheme:w,borderedBottomTheme:i}=M(b);let o="";return u&&(o=w),r("tr",{className:t+` cursor-pointer ${o} h-12`,...h,children:[s,n?e("div",{className:"h-20"}):null]})},ve=({text:t,columns:s=[],body:n,children:u,onSearch:h,page:b,size:w,totalData:i,onPageChanged:o,onFilterClick:v,onAddClick:x,showRefresh:N=!0,showSearch:c=!0,showFilterButton:p=!1,showAddButton:g=!0,className:k,showResultPage:l=!0,processing:f=!1,showPaging:y=!0,...E})=>{P();const j=s.map((T,a)=>e(be,{children:T},a)),F=T=>{T.key=="Enter"&&h(T)};return e("div",{className:"w-full rounded-lg",children:r("div",{className:`pt-4 rounded-lg ${k}`,children:[r("div",{className:"flex justify-between pb-4 px-6",children:[r("div",{className:"flex",children:[c?r("div",{children:["Cari : ",e(H,{className:"h-8 ml-3",onKeyDown:F})]}):null,p?r(ge,{className:"bg-green-500 text-white hover:bg-green-400 hover:text-gray-200 flex items-center ml-4",onClick:v,children:[e("div",{className:"mr-2",children:"Filter"}),e(ne,{})]}):null]}),r("div",{className:"flex justify-between",children:[g?e("div",{className:"flex justify-end",children:r(I,{className:"h-8 mr-2 bg-green-500 text-white hover:bg-green-400 hover:text-gray-200 flex items-center",onClick:x,children:[e("div",{className:"mr-2",children:"Tambah"}),e(le,{})]})}):null,N?e("div",{className:"flex justify-end",children:r(I,{className:"h-8 mr-2 bg-green-500 text-white hover:bg-green-400 hover:text-gray-200 flex items-center",onClick:()=>onEdit({id:null,name:"",description:""}),children:[e("div",{className:"mr-2",children:"Refresh"}),e(re,{})]})}):null]})]}),r("table",{className:"min-w-full",children:[e("thead",{className:"h-12",children:e(V,{className:"",highLight:!1,children:j})}),i>0&&!f?e("tbody",{className:"h-14 mb-6",children:u}):null]}),f?e("div",{className:"flex justify-center text-center",children:"Sedang Memuat data... "}):null,i==0&&!f?e(oe,{}):null,y?e(fe,{page:b,size:w,totalData:i,onPageChanged:o,showResultPage:l}):null]})})},C=({children:t,className:s,position:n="left",...u})=>{let h="text-left";return n=="right"&&(h="text-right"),e("td",{className:`font-normal pl-8 ${h} ${s}`,children:t})},K={id:null,name:""};m({key:"genderListState",default:{_paging:S}});m({key:"genderState",default:K});const W={id:0,name:""};m({key:"provinceListState",default:{_paging:S}});m({key:"provinceState",default:W});const q={id:0,name:"",province:W};m({key:"regencyListState",default:{_paging:S}});m({key:"regencyState",default:q});const G={id:0,name:"",regency:q};m({key:"districtListState",default:{_paging:S}});m({key:"districtState",default:G});const O={id:0,name:"",district:G};m({key:"villageListState",default:{_paging:S}});m({key:"villageState",default:O});const J={id:0,name:"",nik:"",date_of_birth:"",place_of_birth:"",phone:"",job:"",religion:"",degree:"",address:"",gender:K,village:O,current_village:O,patient:X};m({key:"personListState",default:{_paging:S}});m({key:"personState",default:J});m({key:"personFilterState",default:{medical_record_number:""}});function xe({items:t,onOptionClick:s,selectedItem:n,...u}){const{theme:h}=P(),{hoverTheme:b,bgTheme:w,layoutTheme:i,borderTheme:o}=M(h),[v,x]=d.useState(!1);d.useState("");const N=d.useRef(),c=d.useRef(),p=()=>{x(!0)},g=(l,f)=>{x(!1),s(l,f)},k=l=>{N.current&&c.current&&!N.current.contains(l.target)&&!c.current.contains(l.target)&&(x(!1),onPopoverState(!1))};return d.useEffect(()=>(document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}),[]),d.useEffect(()=>{},[]),r("div",{className:"relative inline-block",children:[e("button",{ref:N,className:"rounded-full p-2 focus:outline-none",onFocus:p,children:e(ie,{})}),v&&e("div",{className:`z-10 absolute top-0 right-0 mt-2 rounded-lg shadow-md ${o} ${i}`,ref:c,children:t.map((l,f)=>{let y;return t.length==1?y="rounded-lg":(y=f==0?"rounded-t-lg":"",y=f==t.length-1?"rounded-b-lg":y),e("button",{className:`whitespace-nowrap text-sm block w-full ${y} text-left px-4 py-2 ${i} ${b}`,onClick:()=>g(l,n),children:l.caption})})})]})}function Oe(){const[t,s]=R(ce),[n,u]=R(de);R($);const[h,b]=d.useState(!1),[w,i]=d.useState(!1),[o,v]=R($),[x,N]=d.useState(!1),[c,p]=d.useState({page:1,keyword:"",order_by:"id",order_direction:"DESC"}),g=(a={})=>{i(!0),a={...a,embed:["scope"]},Z(z,A(),a).then(_=>{_.status==200&&s(_.data.data),_.status==204&&s(me),i(!1)}).catch(_=>{i(!1)})},k=()=>{n.id>0&&ee(te+"/"+n.id,A(),{is_complete:!0}).then(a=>{a.status==200&&(v({color:D.success,message:"Success to update status"}),g())}).catch(a=>{v({color:D.danger,message:"Failed to update status"})})},l=a=>{p({...c,keyword:a.target.value}),g({...c,keyword:a.target.value})},f=a=>{u(a),setPerson(a.registration.patient.person),b(!0)},y=a=>{p({...c,page:a}),g({...c,page:a})},E=(a,_)=>{u(_),a.caption=="Complete"&&k()},j=()=>[{caption:"Complete"}],F=()=>{setPerson(J),u(ue),b(!0)};return d.useEffect(()=>{g(c)},[]),e(Y,{textName:"Table Reservation",breadCrumbItems:[{label:"Reservations"},{label:"Table Rerservations"}],children:e("div",{className:"flex",children:e(ve,{processing:w,text:"",columns:["No","Table","Reservation","Creator","Aksi"],onSearch:l,onPageChanged:y,showFilterButton:!1,showAddButton:!1,onAddClick:F,onFilterClick:()=>N(!x),page:t._paging.page,size:t._paging.limit,totalData:t._paging.total_data,children:t._resources&&t._resources.map((a,_)=>{const Q=(t._paging.page-1)*t._paging.limit+_+1;return r(V,{addSpace:!0,onDoubleClick:()=>{f(a)},children:[e(C,{children:Q}),e(C,{children:e("span",{children:a.table.name})}),e(C,{children:r("div",{className:"items-center",children:[e("div",{className:"mr-2",children:a.reserve_for}),r("div",{className:"flex",children:[e(B,{className:"text-xs bg-green-600 text-white mr-2",children:a.reserve_at}),a.is_complete?e(B,{className:"text-xs bg-blue-600 text-white mr-2",children:"complete"}):null]})]})}),e(C,{children:r("div",{className:"items-center",children:[e("div",{className:"mr-2",children:a.user.username}),e("div",{className:"flex",children:e(B,{className:"text-xs bg-green-600 text-white mr-2 mb-1",children:a.user.scopes.map((U,Ne)=>U.name).join(", ")})})]})}),e(C,{className:"items-center",children:e(xe,{items:j(),selectedItem:a,onOptionClick:E,className:"text-xs p-1 rounded-lg"})})]})})})})})}export{Oe as default};
