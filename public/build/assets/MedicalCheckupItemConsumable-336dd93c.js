import{q as j,R as _,c as F,r as k,t as L,a as s,j as m}from"./app-d2a3d537.js";import{z as C}from"./Api-80eca046.js";import{p as P,a as f,b as R,d as M}from"./Request-a7bce2e9.js";import{u as q,a as B}from"./app-fb271a11.js";import{F as D}from"./Form-5433bd3a.js";import{I as b}from"./InputLabel-3da68630.js";import{P as v}from"./PrimaryButton-c4bee480.js";import{T as E}from"./TextInput-21fcf679.js";import{a as O,m as z}from"./MedicalCheckupItem-38b98507.js";import{T as p}from"./Toast-3fee0a06.js";import{R as n}from"./ResponseMessages-5367e22c.js";import G from"./ItemListPopoverSearch-f8cb5ac6.js";import"./MedicalCheckup-84b76896.js";import{m as H}from"./MedicalCheckupFormGigi-385eedbe.js";import{m as K}from"./MedicalCheckupFormUmum-76e447aa.js";import{g as I}from"./Helper-e1a63998.js";import{m as U}from"./MedicalCheckupFormMata-51d7ac05.js";import"./Item-5a97d1bd.js";import"./Uom-6085d693.js";import"./ItemMargin-b56d4323.js";import"./TableDetail-31226791.js";import"./index.esm-2b0f1775.js";import"./BorderedRoundedButton-600ca3a5.js";import"./Button-6a81ea58.js";import"./NoData-9ab3477f.js";import"./PopoverInput-8f306410.js";import"./Pill-07fbc269.js";import"./CheckupRecord-2fa0f175.js";import"./Registration-c85af660.js";import"./Doctor-8ebd7b82.js";import"./Clinic-f89fd43c.js";import"./VisitType-0f2b0c06.js";import"./Patient-e8af8ff9.js";import"./HealthWorker-225f8e62.js";import"./Certificate-b20e9c29.js";function je({title:y,item:V,onSubmit:d,...$}){const{theme:N}=q(),{bigFontColorTheme:T}=B(N),h=j();I(h,"checkup_record_id");const r=I(h,"clinic");let c=null;r!=null&&r.toLowerCase()=="gigi"?c=H:r!=null&&r.toLowerCase()=="umum"?c=K:r!=null&&r.toLowerCase()=="mata"&&(c=U);const[e,o]=_(O),u=F(c),[g,a]=k.useState(!1),[A,l]=_(L);k.useState(!1);const x=t=>{t.preventDefault(),a(!0),e.id==0?P(C,f(),{...e,medical_checkup:u}).then(i=>{i.status==201&&(o({...z,medical_checkup:u}),l({color:p.success,message:n.data_saved}),d()),a(!1)}).catch(i=>{a(!1),l({color:p.danger,message:n.data_failed_to_save})}):R(C+"/"+e.id,f(),e).then(i=>{i.status==200&&(o({...i.data.data._resources,medical_checkup:u}),l({color:p.success,message:n.data_saved}),d()),a(!1)}).catch(i=>{l({color:p.danger,message:n.data_failed_to_save}),a(!1)})},S=t=>{o({...e,item:t,price_per_unit:t.sell_price})},w=()=>{a(!1),M(url_medicalCheckupItem+"/"+e.id,f()).then(t=>{t.status==200&&(o({id:null,name:"",description:""}),d()),a(!1)})};return s("div",{className:"w-full",children:e?m(D,{className:"w-full text-gray-400 border-gray-200 border border-opacity-20 justify-center",children:[m("div",{className:`mb-5 text-lg font-semibold ${T}`,children:[e.id!=0?"Edit":"Tambah"," ",y]}),m("div",{className:"w-full mr-4",children:[s(b,{htmlFor:"clinic",value:"Barang"}),s(G,{itemTypeId:2,inStockOnly:!0,currentItem:e.item,className:"h-8 w-96 mr-2",onSelect:S})]}),m("div",{className:"mt-4",children:[s(b,{htmlFor:"description",value:"Kuantitas"}),s(E,{id:"description",type:"number",name:"description",value:e.quantity,className:"mt-1 block w-full h-8",onChange:t=>o({...e,quantity:t.target.value})})]}),m("div",{className:"flex items-center justify-end mt-6",children:[s(v,{className:"ml-4 bg-green-500 hover:bg-green-400",disabled:g,onClick:x,children:"Simpan"}),s(v,{className:"ml-4 bg-red-500 hover:bg-red-400",disabled:g||e.id==0,onClick:w,children:"Hapus"})]})]}):null})}export{je as default};
