import{e as d,f as N,R as _,c as O,r as y,t as L,a as t,j as s}from"./app-d2a3d537.js";import{m as v}from"./Api-80eca046.js";import{p as C,a as h,b as D,d as F}from"./Request-a7bce2e9.js";import{u as P,a as B}from"./app-fb271a11.js";import{F as R}from"./Form-5433bd3a.js";import{I as r}from"./InputLabel-3da68630.js";import{P as g}from"./PrimaryButton-c4bee480.js";import{T as b}from"./TextInput-21fcf679.js";import{m as q}from"./MovementType-9ffc2d4d.js";import{c as U}from"./Item-5a97d1bd.js";import{u as H}from"./Uom-6085d693.js";import{T as n}from"./Toast-3fee0a06.js";import"./PopoverInput-8f306410.js";import $ from"./ItemListPopoverSearch-f8cb5ac6.js";import z from"./UomListPopoverInput-4daf57fd.js";const w={id:0,movement_number:"",description:"",movement_type:q},de={_paging:N},ue=d({key:"itemMovementListState",default:{_paging:N}}),E=d({key:"itemMovementState",default:w}),c={id:0,quantity:0,price_per_unit:0,item:U,uom:H,item_movement:w,distributor:""},pe=d({key:"itemMovementItemListState",default:{_paging:N}}),K=d({key:"itemMovementItemState",default:c});function A({title:G,item:J,onSubmit:u,...Q}){const{theme:x}=P(),{borderedBottomTheme:I}=B(x),[e,m]=_(K),p=O(E),[f,i]=y.useState(!1),[V,l]=_(L);y.useState(!1);const M=a=>{a.preventDefault(),i(!0),e.id==0?C(v,h(),{...e,item_movement:p}).then(o=>{o.status==201&&(m(c),l({color:n.success,message:"Data berhasil disimpan"}),u()),i(!1)}).catch(o=>{i(!1),l({color:n.danger,message:"Data gagal disimpan"})}):D(v+"/"+e.id,h(),e).then(o=>{o.status==200&&(m(o.data.data._resources),l({color:n.success,message:"Data berhasil disimpan"}),u()),i(!1)}).catch(o=>{l({color:n.danger,message:"Data gagal disimpan"}),i(!1)})},S=a=>{m({...e,uom:a})},j=a=>{m({...e,item:a,uom:a.uom})},T=()=>{m(c)},k=()=>{i(!1),F(v+"/"+e.id,h()).then(a=>{a.status==200&&(m(c),u()),i(!1)})};return t("div",{className:"w-full",children:e?t("div",{className:`flex justify-between pb-4 ${I}`,children:s(R,{className:"w-full text-gray-400 border-gray-200 border border-opacity-20",children:[t("div",{className:"px-4 mb-5 mt-12 text-2xl"}),s("div",{className:"flex pl-4 mb-4 justify-between",children:[s("div",{className:"w-full mr-4",children:[t(r,{htmlFor:"clinic",value:"Barang"}),t($,{currentItem:e.item,className:"h-8 w-96 mr-2",onSelect:j})]}),s("div",{className:"w-full mr-4",children:[t(r,{htmlFor:"clinic",value:"Unit"}),t(z,{readOnly:!0,item:e.uom,className:"h-8 w-96 mr-2",onSelect:S})]})]}),s("div",{className:"flex pl-4 justify-between",children:[s("div",{className:"w-full mr-4",children:[t(r,{htmlFor:"name",value:"Kuantitas"}),t(b,{id:"name",type:"text",name:"name",value:e.quantity,className:"mt-1 block w-full h-8",placeholder:"[Otomatis Terisi]",onChange:a=>m({...e,quantity:a.target.value})})]}),s("div",{className:" w-full mr-4",children:[t(r,{htmlFor:"name",value:"Harga per unit"}),t(b,{id:"name",type:"text",name:"name",value:e.price_per_unit,className:"mt-1 block w-full h-8",placeholder:"[Otomatis Terisi]",onChange:a=>m({...e,price_per_unit:a.target.value})})]}),s("div",{className:"w-full mr-4",children:[t(r,{htmlFor:"description",value:"Distributor"}),t(b,{id:"description",type:"text",name:"description",value:e.distributor,className:"mt-1 block w-full h-8",onChange:a=>m({...e,distributor:a.target.value})})]})]}),s("div",{className:"flex items-center justify-between mt-6 pr-4",children:[t(g,{className:"ml-4 bg-green-500 hover:bg-green-400",disabled:f||p.id==0,onClick:T,children:"Baru"}),s("div",{className:"flex justify-end",children:[t(g,{className:"ml-4 bg-green-500 hover:bg-green-400",disabled:f||p.id==0||e.id>0,onClick:M,children:"Simpan"}),t(g,{className:"ml-4 bg-red-500 hover:bg-red-400",disabled:f||e.id==0,onClick:k,children:"Hapus"})]})]})]})}):null})}const fe=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as I,E as a,w as b,pe as c,K as d,de as e,c as f,fe as g,ue as i};
