import{q as F,R as k,c as M,r as v,t as L,a,j as m}from"./app-d2a3d537.js";import{z as C}from"./Api-80eca046.js";import{p as P,a as h,b as R,d as q}from"./Request-a7bce2e9.js";import{u as B,a as D}from"./app-fb271a11.js";import{F as E}from"./Form-5433bd3a.js";import{I as f}from"./InputLabel-3da68630.js";import{P as b}from"./PrimaryButton-c4bee480.js";import{T as y}from"./TextInput-21fcf679.js";import{c as O,m as z}from"./MedicalCheckupItem-38b98507.js";import{T as n}from"./Toast-3fee0a06.js";import{R as p}from"./ResponseMessages-5367e22c.js";import G from"./ItemListPopoverSearch-f8cb5ac6.js";import"./MedicalCheckup-84b76896.js";import{m as H}from"./MedicalCheckupFormGigi-385eedbe.js";import{m as K}from"./MedicalCheckupFormUmum-76e447aa.js";import{g as I}from"./Helper-e1a63998.js";import{m as U}from"./MedicalCheckupFormMata-51d7ac05.js";import"./Item-5a97d1bd.js";import"./Uom-6085d693.js";import"./ItemMargin-b56d4323.js";import"./TableDetail-31226791.js";import"./index.esm-2b0f1775.js";import"./BorderedRoundedButton-600ca3a5.js";import"./Button-6a81ea58.js";import"./NoData-9ab3477f.js";import"./PopoverInput-8f306410.js";import"./Pill-07fbc269.js";import"./CheckupRecord-2fa0f175.js";import"./Registration-c85af660.js";import"./Doctor-8ebd7b82.js";import"./Clinic-f89fd43c.js";import"./VisitType-0f2b0c06.js";import"./Patient-e8af8ff9.js";import"./HealthWorker-225f8e62.js";import"./Certificate-b20e9c29.js";function je({title:N,item:V,onSubmit:d,...$}){const{theme:x}=B(),{bigFontColorTheme:S}=D(x),g=F();I(g,"checkup_record_id");const i=I(g,"clinic");let c=null;i!=null&&i.toLowerCase()=="gigi"?c=H:i!=null&&i.toLowerCase()=="umum"?c=K:i!=null&&i.toLowerCase()=="mata"&&(c=U);const[e,r]=k(O),u=M(c),[_,s]=v.useState(!1),[A,l]=k(L);v.useState(!1);const T=t=>{t.preventDefault(),s(!0),e.id==0?P(C,h(),{...e,medical_checkup:u}).then(o=>{o.status==201&&(r({...z,medical_checkup:u}),l({color:n.success,message:p.data_saved}),d()),s(!1)}).catch(o=>{s(!1),l({color:n.danger,message:p.data_failed_to_save})}):R(C+"/"+e.id,h(),e).then(o=>{o.status==200&&(r({...o.data.data._resources,medical_checkup:u}),l({color:n.success,message:p.data_saved}),d()),s(!1)}).catch(o=>{l({color:n.danger,message:p.data_failed_to_save}),s(!1)})},w=t=>{r({...e,item:t,price_per_unit:t.sell_price})},j=()=>{s(!1),q(url_medicalCheckupItem+"/"+e.id,h()).then(t=>{t.status==200&&(r({id:null,name:"",description:""}),d()),s(!1)})};return a("div",{className:"w-full",children:e?m(E,{className:"w-full text-gray-400 border-gray-200 border border-opacity-20 justify-center",children:[m("div",{className:`mb-5 text-lg font-semibold ${S}`,children:[e.id!=0?"Edit":"Tambah"," ",N]}),m("div",{className:"w-full mr-4",children:[a(f,{htmlFor:"clinic",value:"Barang"}),a(G,{itemTypeId:1,inStockOnly:!0,currentItem:e.item,className:"h-8 w-96 mr-2",onSelect:w})]}),m("div",{className:"mt-4",children:[a(f,{htmlFor:"description",value:"Kuantitas"}),a(y,{id:"description",type:"number",name:"description",value:e.quantity,className:"mt-1 block w-full h-8",onChange:t=>r({...e,quantity:t.target.value})})]}),m("div",{className:"mt-4",children:[a(f,{htmlFor:"description",value:"Signa"}),a(y,{id:"description",type:"text",name:"description",value:e.signa,className:"mt-1 block w-full h-8",onChange:t=>r({...e,signa:t.target.value})})]}),m("div",{className:"flex items-center justify-end mt-6",children:[a(b,{className:"ml-4 bg-green-500 hover:bg-green-400",disabled:_,onClick:T,children:"Simpan"}),a(b,{className:"ml-4 bg-red-500 hover:bg-red-400",disabled:_||e.id==0,onClick:j,children:"Hapus"})]})]}):null})}export{je as default};
