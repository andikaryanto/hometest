import{R as m,t as L,c as O,r as c,q as T,a as t,j as a}from"./app-d2a3d537.js";import{A as I}from"./AdminLayout-90b2035a.js";import{g as E,a as V,c as b}from"./Request-a7bce2e9.js";import{T as q,a as z,b as l}from"./TableDetail-31226791.js";import{a as M,c as B,b as G,d as H,e as J}from"./CheckupRecord-2fa0f175.js";import{b as K}from"./Api-80eca046.js";import{P as n}from"./Pill-07fbc269.js";import{p as Q,a as U}from"./Person-886fc51c.js";import{C as W}from"./CircleActionButton-397e1f15.js";import{g as X}from"./Helper-e1a63998.js";import Y from"./CheckupRecordFilter-fd38f76d.js";import"./app-fb271a11.js";import"./ThemeButton-138f6990.js";import"./Button-6a81ea58.js";import"./index.esm-2b0f1775.js";import"./Popover-43033a57.js";import"./ClearButton-f395bb26.js";import"./index.es-302dcb1a.js";import"./ApplicationLogo-7624da29.js";import"./BorderedRoundedButton-600ca3a5.js";import"./TextInput-21fcf679.js";import"./PrimaryButton-c4bee480.js";import"./NoData-9ab3477f.js";import"./Registration-c85af660.js";import"./Doctor-8ebd7b82.js";import"./Clinic-f89fd43c.js";import"./VisitType-0f2b0c06.js";import"./Patient-e8af8ff9.js";import"./HealthWorker-225f8e62.js";import"./Gender-8c6cfe2c.js";import"./Village-746193ad.js";import"./InputLabel-3da68630.js";import"./Panel-b158e787.js";import"./ClinicListSelectInput-e4f3cbe0.js";import"./PopoverInput-8f306410.js";import"./DoctorListPopoverSearch-207bf51f.js";import"./VisitTypeListPopoverSearch-f7c0df1c.js";import"./RegistrationListPopoverSearch-8a07c592.js";import"./RegistrationType-9a523c17.js";function Me(){const[s,h]=m(M),[Z,u]=m(B),[$,f]=m(Q);m(L);const r=O(G),[ee,x]=c.useState(!1),[N,p]=c.useState(!1),[_,w]=c.useState(!1),v=T(),g=X(v,"registration_status_id"),[o,k]=c.useState({page:1,keyword:"",order_by:"id",order_direction:"DESC"}),d=(e={})=>{p(!0),g&&(e={...e,registration_status_id:g}),r.registration.doctor.id>0&&(e={...e,doctor_id:r.registration.doctor.id}),r.registration.clinic.id>0&&(e={...e,clinic_id:r.registration.clinic.id}),r.registration.registration_type.id>0&&(e={...e,registration_type_id:r.registration.registration_type.id}),r.registration.visit_type.id>0&&(e={...e,visit_type_id:r.registration.visit_type.id}),e={...e,embed:["medical_checkup"]},E(K,V(),e).then(i=>{i.status==200&&h(i.data.data),i.status==204&&h(H),p(!1)}).catch(i=>{p(!1)})},P=e=>{k({...o,keyword:e.target.value}),d({...o,keyword:e.target.value})},y=e=>{u(e),f(e.registration.patient.person),x(!0)},R=e=>{k({...o,page:e}),d({...o,page:e})},C=(e,i)=>{e.href!=null&&e.caption=="Detail"&&(window.location=e.href+"?registration_id="+i.registration.id),e.href!=null&&e.caption=="Periksa Pasien"&&(window.location=e.href+"?checkup_record_id="+i.id+"&clinic="+i.registration.clinic.name)},S=()=>[{caption:"Detail",href:b.web_url+"/checkup-record/add"},{caption:"Periksa Pasien",href:b.web_url+"/medical-checkup/add"}],A=()=>{d(o)},F=()=>{f(U),u(J),x(!0)};c.useEffect(()=>{d(o)},[]);let D=g==1?"Pemerikasaan Awal":"Pendaftaran Pasien";return t(I,{textName:D,breadCrumbItems:[{label:"Pemeriksaan Pasien"},{label:"Pasien Daftar"}],children:a("div",{className:"flex",children:[t(Y,{isVisible:_,className:"w-64",onFilterApply:A}),t(q,{processing:N,text:"",columns:["No","Periksa Awal","Pasien","Poli","Aksi"],onSearch:P,onPageChanged:R,showFilterButton:!1,showAddButton:!1,onAddClick:F,onFilterClick:()=>w(!_),page:s._paging.page,size:s._paging.limit,totalData:s._paging.total_data,children:s._resources&&s._resources.map((e,i)=>{const j=(s._paging.page-1)*s._paging.limit+i+1;return a(z,{addSpace:!0,onDoubleClick:()=>{y(e)},children:[t(l,{children:j}),a(l,{children:[t("span",{children:e.checkup_number}),t("div",{className:"flex items-center",children:t("div",{className:"mr-2",children:e.registration.created_at})})]}),a(l,{children:[a("div",{className:"flex items-center",children:[t("div",{className:"mr-2",children:e.registration.patient.person.name}),t(n,{className:"text-xs bg-green-600 text-white mr-2",children:e.registration.patient.medical_record_number})]}),a("div",{className:"text-sm",children:[e.registration.patient.person.gender.name," â€¢ ",e.registration.patient.person.age," Tahun"]}),t("div",{className:"flex text-xs",children:t(n,{className:"text-xs bg-green-600 text-white mr-2",children:e.registration.registration_status.name})})]}),a(l,{children:[t("div",{className:"flex items-center",children:t("div",{className:"mr-2",children:e.registration.clinic.name})}),t("div",{className:"flex text-xs mb-2",children:t(n,{className:"text-xs bg-blue-500 text-white mr-2",children:e.registration.doctor.name})}),a("div",{className:"flex text-xs mb-2",children:[t(n,{className:"text-xs bg-gray-500 text-white mr-2",children:e.registration.registration_type.name}),t(n,{className:"text-xs bg-green-600 text-white",children:e.registration.visit_type.name})]}),e.medical_checkup?t("div",{className:"flex text-xs",children:t(n,{className:"text-xs bg-gray-500 text-white mr-2",children:"Sudah diperiksa dokter"})}):null]}),t(l,{className:"items-center",children:t(W,{items:S(),selectedItem:e,onOptionClick:C,className:"text-xs p-1 rounded-lg"})})]})})})]})})}export{Me as default};
