import{R as g,t as B,c as G,r as m,q as M,a as e,j as r}from"./app-d2a3d537.js";import{A as U}from"./AdminLayout-90b2035a.js";import{a as w,g as q,b as z,c as H}from"./Request-a7bce2e9.js";import{T as J,a as K,b as d}from"./TableDetail-31226791.js";import{c as Q,p as W,b as X,d as Y,a as Z}from"./Registration-c85af660.js";import $ from"./Person-d9a8b2bc.js";import{u as tt,G as et}from"./Api-80eca046.js";import it from"./Registration-5134af2b.js";import{P as p}from"./Pill-07fbc269.js";import{p as at,a as st}from"./Person-886fc51c.js";import"./app-fb271a11.js";import{C as rt}from"./CircleActionButton-397e1f15.js";import{T as R}from"./Toast-3fee0a06.js";import{S as ot}from"./SlideSideBar-5ef5a5e3.js";import{g as nt}from"./Helper-e1a63998.js";import lt from"./RegistrationFilter-671f4ef3.js";import"./ThemeButton-138f6990.js";import"./Button-6a81ea58.js";import"./index.esm-2b0f1775.js";import"./Popover-43033a57.js";import"./ClearButton-f395bb26.js";import"./index.es-302dcb1a.js";import"./ApplicationLogo-7624da29.js";import"./BorderedRoundedButton-600ca3a5.js";import"./TextInput-21fcf679.js";import"./PrimaryButton-c4bee480.js";import"./NoData-9ab3477f.js";import"./Doctor-8ebd7b82.js";import"./Clinic-f89fd43c.js";import"./VisitType-0f2b0c06.js";import"./Patient-e8af8ff9.js";import"./InputLabel-3da68630.js";import"./GenderInputList-7d2c966a.js";import"./PopoverInput-8f306410.js";import"./Gender-8c6cfe2c.js";import"./Calendar-d1ebbba8.js";import"./PatientInputSearch-b43a229e.js";import"./InputError-1d44d59a.js";import"./Village-746193ad.js";import"./Form-5433bd3a.js";import"./TextArea-ea22aa05.js";import"./VillageListPopoverSearch-0cd516c5.js";import"./ClinicListSelectInput-e4f3cbe0.js";import"./RegistrationListPopoverSearch-8a07c592.js";import"./RegistrationType-9a523c17.js";import"./DoctorListPopoverSearch-207bf51f.js";import"./VisitTypeListPopoverSearch-f7c0df1c.js";import"./Panel-b158e787.js";function oe(){const[o,h]=g(Q),[ct,_]=g(W),[mt,x]=g(at),[dt,b]=g(B),i=G(X),[k,f]=m.useState(!1),[y,u]=m.useState(!1),[N,C]=m.useState(!1),A=M(),n=nt(A,"registration_status_id"),[a,P]=m.useState({page:1,keyword:"",order_by:"id",order_direction:"DESC"}),l=(t={})=>{u(!0),n&&(t={...t,registration_status_id:n}),i.doctor.id>0&&(t={...t,doctor_id:i.doctor.id}),i.clinic.id>0&&(t={...t,clinic_id:i.clinic.id}),i.registration_type.id>0&&(t={...t,registration_type_id:i.registration_type.id}),i.visit_type.id>0&&(t={...t,visit_type_id:i.visit_type.id});const c=w();q(et,c,t).then(s=>{s.status==200&&h(s.data.data),s.status==204&&h(Y),u(!1)}).catch(s=>{u(!1)})},F=t=>{P({...a,keyword:t.target.value}),l({...a,keyword:t.target.value})},T=t=>{_(t),x(t.patient.person),n!=1&&f(!0)},D=t=>{P({...a,page:t}),l({...a,page:t})},v=()=>{l(a)},I=(t,c)=>{if(t.href!=null)window.location=t.href+"?registration_id="+c.id;else{const s={registration_status:{id:t.value}};z(tt+"/"+c.id,w(),s).then(S=>{S.status==200&&(b({color:R.success,message:"Berhasil Ubah Status: "+t.caption}),l(a))}).catch(S=>{b({color:R.danger,message:"Gagal Ubah Status: "+t.caption})})}},O=()=>n==1?[{caption:"Periksa",href:H.web_url+"/checkup-record/add",value:2}]:[{caption:"Check In",value:1},{caption:"Selesai",value:3},{caption:"Pending",value:4}],j=()=>{l(a)},L=()=>{x(st),_(Z),f(!0)};m.useEffect(()=>{l(a)},[]);let E=n==1?"Pemerikasaan Awal":"Pendaftaran Pasien";const V=["No","Pasien","Poli","Tanggal","Aksi"];return e(U,{textName:E,breadCrumbItems:[{label:"Pendaftaran Pasien"},{label:n==1?"Pemerikasaan Awal":"Pendaftaran Pasien"}],children:r("div",{className:"flex",children:[e(ot,{className:"w-2/4",title:"Registrasi Pasien",isOpen:k,onClose:()=>f(!1),position:"left",isScrollabe:!1,children:r("div",{className:"flex",children:[e($,{title:"Data Pasien",onSubmit:v,className:"mr-8"}),e(it,{title:"Pendaftaran",onSubmit:v})]})}),e(lt,{isVisible:N,className:"w-64",onFilterApply:j}),e(J,{processing:y,text:"",columns:V,onSearch:F,onPageChanged:D,showFilterButton:!1,showAddButton:n==null,onAddClick:L,onFilterClick:()=>C(!N),page:o._paging.page,size:o._paging.limit,totalData:o._paging.total_data,children:o._resources&&o._resources.map((t,c)=>{const s=(o._paging.page-1)*o._paging.limit+c+1;return r(K,{addSpace:!0,onDoubleClick:()=>T(t),children:[e(d,{children:s}),r(d,{children:[r("div",{className:"flex items-center",children:[e("div",{className:"mr-2",children:t.patient.person.name}),e(p,{className:"text-xs bg-green-600 text-white mr-2",children:t.patient.medical_record_number})]}),r("div",{className:"text-sm",children:[t.patient.person.gender.name," â€¢ ",t.patient.person.age," Tahun"]}),e("div",{className:"flex text-xs",children:e(p,{className:"text-xs bg-green-600 text-white mr-2",children:t.registration_status.name})})]}),r(d,{children:[e("div",{className:"flex items-center",children:e("div",{className:"mr-2",children:t.clinic.name})}),e("div",{className:"flex text-xs mb-2",children:e(p,{className:"text-xs bg-blue-500 text-white mr-2",children:t.doctor.name})}),r("div",{className:"flex text-xs",children:[e(p,{className:"text-xs bg-gray-500 text-white mr-2",children:t.registration_type.name}),e(p,{className:"text-xs bg-green-600 text-white",children:t.visit_type.name})]})]}),e(d,{children:t.created_at}),e(d,{className:"items-center",children:e(rt,{items:O(),selectedItem:t,onOptionClick:I,className:"text-xs p-1 rounded-lg",children:"Check in"})})]})})})]})})}export{oe as default};
