import{r as d,a as s,j as i}from"./app-d2a3d537.js";import{A as k}from"./AdminLayout-90b2035a.js";import{h as c,g as _,b as x,p as A}from"./Request-a7bce2e9.js";import"./app-fb271a11.js";import{R as S}from"./RoundedCard-ba8f5ce7.js";import{T as w,a as y,b as o,B as v}from"./TableDetail-31226791.js";import{E as T}from"./Api-80eca046.js";import"./ThemeButton-138f6990.js";import"./Button-6a81ea58.js";import"./index.esm-2b0f1775.js";import"./Popover-43033a57.js";import"./ClearButton-f395bb26.js";import"./index.es-302dcb1a.js";import"./ApplicationLogo-7624da29.js";import"./BorderedRoundedButton-600ca3a5.js";import"./TextInput-21fcf679.js";import"./PrimaryButton-c4bee480.js";import"./NoData-9ab3477f.js";function J(){const[r,u]=d.useState({_resources:[],_paging:{}}),n=e=>{const t=c("access_token");_(T,t,e).then(a=>{a.status==200&&u(a.data.data)}).catch(a=>{})},p=e=>{const t={keyword:e.target.value};n(t)},g=()=>{const e=r._resources.filter(t=>t.is_called).sort((t,a)=>a.id-t.id);return e.length>0?e[0].sequence:""},h=e=>{const t=c("access_token");x("/number-assignment/"+e.id,t,{is_called:!0}).then(a=>{if(a.status==200){const l=e.sequence.split("-"),N=`Nomor Antrean.... ${Array.from(l[0]).join("..")+".."+l[1]+".."} Silakan Ke Loket Satu`,m=new SpeechSynthesisUtterance(N);m.lang="id-ID",window.speechSynthesis.speak(m),n()}})},f=()=>{const e=c("access_token");A("/number-assignment",e,{is_called:!1}).then(t=>{t.status==201&&n()})};d.useEffect(()=>{n()},[]);const b=["No","Waktu Ambil","Antrean","Aksi"];return s(k,{textName:"Antrean Front Office",children:i("div",{className:"flex",children:[s("div",{className:"w-1/4 mr-4",children:i(S,{className:"text-center w-full border-gray-200 border border-opacity-20 justify-center",children:[s("div",{className:"text-xl mb-10",children:"No Antrian Dipanggil"}),s("div",{className:"text-3xl mb-2 text-green-500",children:g()}),s("div",{className:"text-lg",children:"LOKET 1"})]})}),s(w,{text:"Daftar Antrean",columns:b,onSearch:p,onAddClick:f,page:r._paging.page,size:r._paging.limit,totalData:r._paging.total_data,showRefresh:!1,children:r._resources.map((e,t)=>{const a=t+1;return i(y,{children:[s(o,{children:a}),s(o,{children:e.pick_at}),s(o,{children:e.sequence}),s(o,{className:"items-center",children:s(v,{onClick:()=>h(e),className:"bg-green-500 text-white hover:bg-green-400 hover:text-gray-200",children:" Panggil"})})]})})})]})})}export{J as default};
