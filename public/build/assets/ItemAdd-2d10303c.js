import{R as N,r as g,t as T,q as B,a,j as s}from"./app-d2a3d537.js";import{p as D,a as c,b as U,g as M,d as X}from"./Request-a7bce2e9.js";import{I as m}from"./InputLabel-3da68630.js";import{P}from"./PrimaryButton-c4bee480.js";import{T as d}from"./TextInput-21fcf679.js";import{i as K,c as R}from"./Item-5a97d1bd.js";import{F as A}from"./Form-5433bd3a.js";import{i as u}from"./Api-80eca046.js";import{g as S}from"./Helper-e1a63998.js";import E from"./UomListPopoverInput-4daf57fd.js";import{T as J}from"./Tabs-0749dd7e.js";import{F as L}from"./index.esm-2b0f1775.js";import{P as H}from"./Popover-43033a57.js";import q from"./ItemMarginListPopoverSearch-ae49bc4d.js";import{T as l}from"./Toast-3fee0a06.js";import"./app-fb271a11.js";import"./Uom-6085d693.js";import"./ItemMargin-b56d4323.js";import"./TableDetail-31226791.js";import"./BorderedRoundedButton-600ca3a5.js";import"./Button-6a81ea58.js";import"./NoData-9ab3477f.js";import"./PopoverInput-8f306410.js";function va({title:C,onSubmit:p,...V}){const[t,i]=N(K),[f,r]=g.useState(!1),[y,v]=g.useState(!1),[z,o]=N(T),b=B(),k=S(b,"item_type_id"),h=S(b,"id");k==1&&(C="Obat");const x=e=>{e.preventDefault(),r(!0),t.id==0?D(u,c(),{...t,item_type:{id:k}}).then(n=>{n.status==201&&(i(n.data.data._resources),o({color:l.success,message:"Data berhasil disimpan"}),p()),r(!1)}).catch(n=>{o({color:l.danger,message:"Data gagal disimpan "+n.message}),r(!1)}):U(u+"/"+t.id,c(),t).then(n=>{n.status==200&&(o({color:l.success,message:"Data berhasil disimpan"}),i(n.data.data._resources),p()),r(!1)}).catch(n=>{o({color:l.danger,message:"Data gagal disimpan "+n.message}),r(!1)})},j=()=>{M(u+"/"+h,c()).then(e=>{e.status==200&&i(e.data.data._resources)}).catch(e=>{})},_=()=>{r(!1),X(u+"/"+t.id,c()).then(e=>{e.status==200&&(o({color:l.success,message:"Data berhasil dihapus"}),i(R),p()),r(!1)})},F=e=>{i({...t,uom:e})},I=e=>{i({...t,item_margin:e})},w=()=>{v(!0)},O=e=>{v(e)};return g.useEffect(()=>{h>0&&j()},[h]),a("div",{className:"mb-10 w-ful",children:t?s(J,{headers:["Master Item"],children:[a("div",{className:"w-full",children:s(A,{className:"w-full text-gray-400 border-gray-200 border border-opacity-20 justify-center",children:[s("div",{className:"mt-4",children:[a(m,{htmlFor:"code",value:"Kode"}),a(d,{id:"code",type:"text",name:"code",value:t.code,className:"mt-1 block w-full h-8",isFocused:!0,onChange:e=>i({...t,code:e.target.value})})]}),s("div",{className:"mt-4",children:[a(m,{htmlFor:"name",value:"Nama"}),a(d,{id:"name",type:"text",name:"name",value:t.name,className:"mt-1 block w-full h-8",isFocused:!0,onChange:e=>i({...t,name:e.target.value})})]}),s("div",{className:"mt-4",children:[a(m,{htmlFor:"name",value:"Harga Jual per Unit"}),a(d,{id:"name",type:"number",name:"name",value:t.price_per_unit,className:"mt-1 block w-full h-8",isFocused:!0,onChange:e=>i({...t,price_per_unit:e.target.value})})]}),s("div",{className:"mt-4",children:[a(m,{htmlFor:"name",value:"Margin"}),a(d,{id:"name",type:"number",name:"name",value:t.margin,className:"mt-1 block w-full h-8",isFocused:!0,onChange:e=>i({...t,margin:e.target.value})})]}),s("div",{className:"mt-4",children:[a(m,{htmlFor:"clinic",value:"Ukuran (Satuan Penjualan)"}),a(E,{className:"h-8 w-96",onSelect:F,item:t.uom})]}),s("div",{className:"mt-4",children:[a(m,{htmlFor:"clinic",value:"Margin Penjualan"}),a(q,{className:"h-8 w-96",onSelect:I,item:t.item_margin})]}),s("div",{className:"flex items-center justify-end mt-4",children:[a(P,{className:"ml-4 bg-green-500 hover:bg-green-400",disabled:f,onClick:x,children:"Simpan"}),a(P,{className:"ml-4 bg-red-500 hover:bg-red-400",disabled:f||t.id==null,onClick:_,children:"Hapus"})]})]})}),a("div",{children:s("div",{className:"flex justify-end",children:[a(L,{className:"cursor-pointer",onClick:w}),s(H,{className:"w-80",isOpen:y,onPopoverState:O,children:[a("div",{className:"border-b-2 text-xl",children:"Petunjuk Konversi Unit"}),s("div",{className:"mt-4",children:["Konversi unit digunakan untuk mengonvesi satuan item ke satuan penjualan.",a("div",{className:"mt-2",children:"Contoh:"}),a("div",{children:'Jika unit penjualan adalah "PCS" dan barang yang masuk adalah dalam bentuk "BOX" maka saat pembelian barang / pemasukan barang, kuantitas akan di konversi dari BOX ke PCS misal 1 Box beris 20 PCS, maka pebelian barang dengan unit BOX akan di masukan dalam bentuk PCS yaitu 20 PCS,'}),a("div",{className:"mt-2",children:"Contoh 2:"}),a("div",{children:'Jika unit penjualan adalah "PCS" dan memiliki tingkatan konversi, KARTON → BOX → PCS. 1 KARTON berisi 2 BOX, 2 BOX berisi 20 PCS, makan akan dihitung 1 x 2 x 20 akan menjadi 40 PCS.'}),a("div",{className:"mt-4",children:"NOTE: urutkan konversi dari terbesar sampai ke unit penjualan."})]})]})]})})]}):null})}export{va as default};
